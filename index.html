<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Edu ERP â€” Login & Dashboard</title>

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Merriweather:wght@400;700&display=swap"
    rel="stylesheet">

  <style>
    /* ================= THEMES ================= */
    :root {
      --bg: #0b1220;
      --card: rgba(255, 255, 255, 0.08);
      --muted: rgba(255, 255, 255, 0.88);
      --accent: #22d3ee;
      --accent-2: #6366f1;
      --danger: #fb7185;
      --glass: rgba(255, 255, 255, 0.15);
      --glass-2: rgba(255, 255, 255, 0.06);
      --shadow: 0 30px 80px rgba(0, 0, 0, 0.85);
      --radius: 16px;
      --transition: 350ms cubic-bezier(.2, .9, .2, 1);
    }

    :root[data-theme="light"] {
      --bg: #f4f7fc;
      --card: #ffffff;
      --muted: rgba(20, 25, 40, 0.85);
      --accent: #2563eb;
      --accent-2: #10b981;
      --glass: rgba(0, 0, 0, 0.06);
      --glass-2: rgba(0, 0, 0, 0.03);
      --shadow: 0 20px 40px rgba(20, 30, 60, 0.1);
    }

    :root[data-theme="ocean"] {
      --bg: #071c21;
      --card: rgba(15, 45, 55, 0.7);
      --muted: #d9fdff;
      --accent: #2dd4bf;
      --accent-2: #38bdf8;
    }

    :root[data-theme="sunset"] {
      --bg: #1a0f1a;
      --card: rgba(60, 20, 50, 0.7);
      --muted: #ffe4e6;
      --accent: #fb7185;
      --accent-2: #f59e0b;
    }

    /* ================= BASE ================= */
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Inter", system-ui;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(99, 102, 241, .35), transparent),
        radial-gradient(1000px 500px at 90% 10%, rgba(34, 211, 238, .35), transparent),
        var(--bg);
      color: var(--muted);
      display: flex;
      gap: 20px;
      padding: 24px;
      transition: background var(--transition), color var(--transition);
    }

    /* ================= SIDEBAR ================= */
    nav.sidebar {
      width: 260px;
      padding: 18px;
      border-radius: var(--radius);
      background: var(--card);
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      backdrop-filter: blur(14px);
    }

    .brand {
      display: flex;
      gap: 12px;
      align-items: center;
      border-bottom: 1px solid var(--glass-2);
      padding-bottom: 10px;
    }

    .logo {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin-top: 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .nav-list li {
      padding: 10px 14px;
      border-radius: 12px;
      cursor: pointer;
      transition: all var(--transition);
    }

    .nav-list li:hover,
    .nav-list li.active {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
    }

    .sidebar-footer {
      margin-top: auto;
      display: flex;
      justify-content: space-between;
      gap: 10px;
    }

    /* ================= MAIN ================= */
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      border: 1px solid var(--glass);
    }

    h1 {
      font-family: "Merriweather", serif;
      font-size: 22px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th,
    td {
      padding: 12px;
      border-bottom: 1px solid var(--glass-2);
    }

    /* ================= BUTTONS ================= */
    .btn {
      padding: 10px 14px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: all var(--transition);
    }

    .btn.primary {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: white;
    }

    .btn.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, .4);
    }

    .btn.ghost {
      background: transparent;
      border: 1px solid var(--glass-2);
      color: var(--muted);
    }

    /* ================= LOGIN ================= */
    .login-screen {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .75);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      backdrop-filter: blur(6px);
    }

    .login-card {
      width: 420px;
      padding: 30px;
      border-radius: 20px;
      background: linear-gradient(160deg, rgba(255, 255, 255, .12), rgba(255, 255, 255, .04));
      box-shadow: 0 40px 100px rgba(0, 0, 0, .8);
      color: var(--muted);
    }

    .login-form input {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 12px;
      background: rgba(255, 255, 255, .06);
      border: 1px solid var(--glass-2);
      color: var(--muted);
    }

    .login-form input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, .3);
    }

    /* ================= RESPONSIVE ================= */
    @media (max-width: 900px) {
      nav.sidebar {
        display: none;
      }

      body {
        padding: 14px;
      }
    }
  </style>
</head>

<body>

  <!-- LOGIN -->
  <div id="loginScreen" class="login-screen">
    <div class="login-card">
      <h2>Edu ERP Login</h2>
      <p>demo@edu.test / demo</p>
      <form class="login-form" onsubmit="handleLogin(event)">
        <input id="loginEmail" placeholder="Email" required>
        <input id="loginPassword" type="password" placeholder="Password" required>
        <button class="btn primary" style="width:100%;margin-top:14px">Sign In</button>
      </form>
    </div>
  </div>

  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="brand">
      <div class="logo">ED</div>
      <strong>Our ERP</strong>
    </div>

    <ul class="nav-list">
      <li class="active" data-section="students" onclick="switchSection(this)">Students</li>
      <li data-section="courses" onclick="switchSection(this)">Courses</li>
      <li data-section="grades" onclick="switchSection(this)">Grades</li>
    </ul>


    <div class="sidebar-footer">
      <button class="btn ghost" onclick="toggleTheme()">Theme</button>
      <button class="btn ghost" onclick="logout()">Logout</button>
    </div>
  </nav>

  <!-- MAIN -->
  <main>

    <!-- STUDENTS -->
    <section id="students" class="card section">
      <h1>Student Management</h1>

      <form onsubmit="addStudent(event)">
        <input id="studentName" placeholder="Student Name" required>
        <input id="studentEmail" placeholder="Student Email" required>
        <button class="btn primary">Add Student</button>
      </form>

      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="studentsTable"></tbody>
      </table>
    </section>

    <!-- COURSES -->
    <section id="courses" class="card section" style="display:none">
      <h1>Course Management</h1>

      <form onsubmit="addCourse(event)">
        <input id="courseName" placeholder="Course Name" required>
        <input id="courseCode" placeholder="Course Code" required>
        <button class="btn primary">Add Course</button>
      </form>

      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Code</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="coursesTable"></tbody>
      </table>
    </section>

    <!-- GRADES -->
    <section id="grades" class="card section" style="display:none">
      <h1>Grade Management</h1>

      <form onsubmit="addGrade(event)">
        <select id="gradeStudent" required></select>
        <select id="gradeCourse" required></select>
        <input id="gradeValue" placeholder="Grade (A/B/C)" required>
        <button class="btn primary">Assign Grade</button>
      </form>

      <table>
        <thead>
          <tr>
            <th>Student</th>
            <th>Course</th>
            <th>Grade</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="gradesTable"></tbody>
      </table>
    </section>

  </main>
  <!-- ================= SCRIPT ================= -->
  <script>
    /* ================= DATA ================= */
    let students = JSON.parse(localStorage.getItem("erp_students") || "[]");
    let courses = JSON.parse(localStorage.getItem("erp_courses") || "[]");
    let grades = JSON.parse(localStorage.getItem("erp_grades") || "[]");

    function saveAll() {
      localStorage.setItem("erp_students", JSON.stringify(students));
      localStorage.setItem("erp_courses", JSON.stringify(courses));
      localStorage.setItem("erp_grades", JSON.stringify(grades));
      renderAll();
    }

    /* ================= STUDENTS ================= */
    function addStudent(e) {
      e.preventDefault();
      students.push({
        id: Date.now(),
        name: studentName.value,
        email: studentEmail.value
      });
      e.target.reset();
      saveAll();
    }

    function deleteStudent(id) {
      students = students.filter(s => s.id !== id);
      grades = grades.filter(g => g.studentId !== id);
      saveAll();
    }

    function renderStudents() {
      studentsTable.innerHTML = students.map(s => `
      <tr>
        <td>${s.name}</td>
        <td>${s.email}</td>
        <td><button class="btn ghost" onclick="deleteStudent(${s.id})">Delete</button></td>
      </tr>
    `).join("");
    }

    /* ================= COURSES ================= */
    function addCourse(e) {
      e.preventDefault();
      courses.push({
        id: Date.now(),
        name: courseName.value,
        code: courseCode.value
      });
      e.target.reset();
      saveAll();
    }

    function deleteCourse(id) {
      courses = courses.filter(c => c.id !== id);
      grades = grades.filter(g => g.courseId !== id);
      saveAll();
    }

    function renderCourses() {
      coursesTable.innerHTML = courses.map(c => `
      <tr>
        <td>${c.name}</td>
        <td>${c.code}</td>
        <td><button class="btn ghost" onclick="deleteCourse(${c.id})">Delete</button></td>
      </tr>
    `).join("");
    }

    /* ================= GRADES ================= */
    function addGrade(e) {
      e.preventDefault();
      grades.push({
        id: Date.now(),
        studentId: +gradeStudent.value,
        courseId: +gradeCourse.value,
        value: gradeValue.value
      });
      e.target.reset();
      saveAll();
    }

    function deleteGrade(id) {
      grades = grades.filter(g => g.id !== id);
      saveAll();
    }

    function renderGrades() {
      gradesTable.innerHTML = grades.map(g => {
        const s = students.find(x => x.id === g.studentId);
        const c = courses.find(x => x.id === g.courseId);
        return `
        <tr>
          <td>${s?.name || "-"}</td>
          <td>${c?.name || "-"}</td>
          <td>${g.value}</td>
          <td><button class="btn ghost" onclick="deleteGrade(${g.id})">Delete</button></td>
        </tr>
      `;
      }).join("");
    }

    /* ================= DROPDOWNS ================= */
    function renderDropdowns() {
      gradeStudent.innerHTML = students.map(s =>
        `<option value="${s.id}">${s.name}</option>`
      ).join("");

      gradeCourse.innerHTML = courses.map(c =>
        `<option value="${c.id}">${c.name}</option>`
      ).join("");
    }

    function renderAll() {
      renderStudents();
      renderCourses();
      renderGrades();
      renderDropdowns();
    }

    renderAll();
  </script>

  <script>
    /* ================= AUTH + INIT FIX ================= */
    const AUTH_KEY = "erp_auth";

    function handleLogin(e) {
      e.preventDefault();

      const email = document.getElementById("loginEmail").value.trim();
      const password = document.getElementById("loginPassword").value.trim();

      if (!email || !password) {
        alert("Enter email and password");
        return;
      }

      // Demo login
      localStorage.setItem(AUTH_KEY, "true");

      // Hide login screen
      document.getElementById("loginScreen").style.display = "none";
    }

    function logout() {
      localStorage.removeItem(AUTH_KEY);
      location.reload();
    }

    // INIT on page load
    (function initAuth() {
      const loggedIn = localStorage.getItem(AUTH_KEY);

      document.getElementById("loginScreen").style.display =
        loggedIn ? "none" : "flex";
    })();
  </script>

  <script>
    /* ================= THEME FIX ================= */
    const themes = ["default", "light", "ocean", "sunset"];
    let themeIndex = 0;

    function applyTheme(theme) {
      const root = document.documentElement;

      if (theme === "default") {
        root.removeAttribute("data-theme");
      } else {
        root.setAttribute("data-theme", theme);
      }
    }

    function toggleTheme() {
      themeIndex = (themeIndex + 1) % themes.length;
      const theme = themes[themeIndex];
      applyTheme(theme);
      localStorage.setItem("erp_theme", theme);
    }

    (function initTheme() {
      const savedTheme = localStorage.getItem("erp_theme") || "default";
      themeIndex = themes.indexOf(savedTheme);
      if (themeIndex === -1) themeIndex = 0;
      applyTheme(savedTheme);
    })();
  </script>

  <script>
    /* ================= NAV FIX ================= */
    function switchSection(element) {
      const target = element.dataset.section;

      // Hide all sections
      document.querySelectorAll(".section").forEach(section => {
        section.style.display = "none";
      });

      // Show selected section
      const activeSection = document.getElementById(target);
      if (activeSection) {
        activeSection.style.display = "block";
      }

      // Update active sidebar item
      document.querySelectorAll(".nav-list li").forEach(li => {
        li.classList.remove("active");
      });

      element.classList.add("active");
    }
  </script>
</body>

</html>